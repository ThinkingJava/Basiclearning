JVM在进行垃圾回收时，要做的第一件事情，就是去寻找那些已经没有任何变量引用的对象，从而对此类对象进行回收。那么，JVM是如何判断对象是否已经死亡了呢？

一、引用计数法

程序给对象添加一个引用计数器，每有一个变量引用它时，计数器加1。当引用断开时，计数器减1，当计数器为0时，代表着没有任何变量引用它，该对象就是死亡状态，JVM需要对此对象进行回收。

引用计数器的实现简单，效率也很高。但绝大数主流的虚拟机并没有使用采取此计算法来管理内存，原因是此计算法没有回收那些具有相互循环引用的对象，此类对象确实已经不被使用，但由于相互引用着对方，导致各自的计数器都不为0，因此JVM无法回收它们。

二、可达性分析法

程序创建一系列的GC Roots作为起始点，从这些节点开始向下搜索走过的路径称为引用链，当一个对象与GC Roots没有任何引用链相连的话，即此对象到GC Roots不可达，则证明此对象是不可用，JVM稍后将会对此对象进行回收。

大多数主流的JVM都采用这样的算法来管理内存，它能够解决对象之间的循环引用的问题。对象与对象之间虽然有循环引用，当它们到GC Roots没有任何引用链，系统还是判定它们为可回收对象。

当通过这两种方式确定对象已经没有任何变量引用它们时，JVM将在合适的时机对此类对象进行回收。

方法区主要回收的是无用的类，那么如何判断一个类是无用的类的呢？

判定一个常量是否是“废弃常量”比较简单，而要判定一个类是否是“无用的类”的条件相对苛刻许多。类需要同时满足下面三个条件才能算是“无用的类”：

该类所有的实例都已经被回收，也就是JAVA堆中不存在该类的任何实例。

加载该类的ClassLoader已经被回收。

该类对应的java.lang.Class对象没有在任何地方呗引用，无法在任何地方通过反射访问该类的方法。

虚拟机可以对满足上述的3个条件的无用的类进行回收，这里说的仅仅是“可以”，而并不是和对象一样不是用了就会必然被回收。



归纳为

1.引用计数器为0

2.路径不可达





















